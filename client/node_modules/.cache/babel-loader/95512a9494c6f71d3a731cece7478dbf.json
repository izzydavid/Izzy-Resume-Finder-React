{"ast":null,"code":"import _defineProperty from\"/Users/davidirizarry/Desktop/Macbook/Coding-BootCamp/Coding-BootCamp/izzy-resume-finder-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/davidirizarry/Desktop/Macbook/Coding-BootCamp/Coding-BootCamp/izzy-resume-finder-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/davidirizarry/Desktop/Macbook/Coding-BootCamp/Coding-BootCamp/izzy-resume-finder-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/davidirizarry/Desktop/Macbook/Coding-BootCamp/Coding-BootCamp/izzy-resume-finder-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/davidirizarry/Desktop/Macbook/Coding-BootCamp/Coding-BootCamp/izzy-resume-finder-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/davidirizarry/Desktop/Macbook/Coding-BootCamp/Coding-BootCamp/izzy-resume-finder-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Form,FormGroup,Label,Input,Modal,ModalBody,FormFeedback,ModalHeader,ModalFooter}from'reactstrap';import Spinner from'../../../../Spinner/Spinner';import'./PostJob.css';import Address from\"../Home/components/Address\";import axios from'axios';var PostJob=/*#__PURE__*/function(_React$Component){_inherits(PostJob,_React$Component);function PostJob(){var _getPrototypeOf2;var _this;_classCallCheck(this,PostJob);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PostJob)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={title:'',category:'',description:'',address:'',//this is just a string in purpose of viewing it on the page \naddress1:'',address2:'',state:'',city:'',zip:'',addressFlag:0,spinner:false,success:false};_this.componentDidMount=function(){var address='';if(!_this.props.mainState.address1||!_this.props.mainState.state||!_this.props.mainState.city||!_this.props.mainState.zip){address=\"\";}else{if(_this.props.mainState.address2){address=_this.props.mainState.address1+\" \"+_this.props.mainState.address2+\" \"+_this.props.mainState.state+\" \"+_this.props.mainState.city+\" \"+_this.props.mainState.zip;}else{address=_this.props.mainState.address1+\" \"+_this.props.mainState.state+\" \"+_this.props.mainState.city+\" \"+_this.props.mainState.zip;}_this.setState({address:address,address1:_this.props.mainState.address1,address2:_this.props.mainState.address2,state:_this.props.mainState.state,city:_this.props.mainState.city,zip:_this.props.mainState.zip});}};_this.handler=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.editAddress=function(event){event.preventDefault();_this.setState({addressFlag:0});var address='';if(_this.state.address2){address=_this.state.address1+\" \"+_this.state.address2+\" \"+_this.state.state+\" \"+_this.state.city+\" \"+_this.state.zip;}else{address=_this.state.address1+\" \"+_this.state.state+\" \"+_this.state.city+\" \"+_this.state.zip;}_this.setState({address:address,address1:_this.state.address1,address2:_this.state.address2,state:_this.state.state,city:_this.state.city,zip:_this.state.zip});};_this.viewAddress=function(e){e.preventDefault();_this.setState({addressFlag:1});};return _this;}_createClass(PostJob,[{key:\"resetForm\",value:function resetForm(){this.setState({title:'',category:'',description:''});}},{key:\"submit\",value:function submit(event){var _this2=this;event.preventDefault();var title=this.state.title;var category=this.state.category;var description=this.state.description;var address=this.state.address;var titleInput=document.getElementById('title-input');var categoryInput=document.getElementById('category-input');var descriptionInput=document.getElementById('description-input');var addressInput=document.getElementById('address-input');//form validation\nif(!title||!category||!description||!address){if(!title)titleInput.classList.add('is-invalid');else{titleInput.classList.remove('is-invalid');titleInput.classList.add('is-valid');}if(!category)categoryInput.classList.add('is-invalid');else{categoryInput.classList.remove('is-invalid');categoryInput.classList.add('is-valid');}if(!description)descriptionInput.classList.add('is-invalid');else{descriptionInput.classList.remove('is-invalid');descriptionInput.classList.add('is-valid');}if(!address)addressInput.classList.add('is-invalid');else{addressInput.classList.remove('is-invalid');addressInput.classList.add('is-valid');}}else{//request\nthis.toggle1();axios.post('/api/jobs',{owner:this.props.mainState.id,title:this.state.title,description:this.state.description,category:this.state.category,address:{address1:this.state.address1,address2:this.state.address2,city:this.state.city,state:this.state.state,zip:this.state.zip}//now you can take address1,address2,state,city,zip from his.state\n}).then(function(res){_this2.toggle1();_this2.toggle2();_this2.resetForm();console.log(res);}).catch(function(err){console.error(err);_this2.toggle1();});}}},{key:\"toggle1\",value:function toggle1(){this.setState({spinner:!this.state.spinner});}},{key:\"toggle2\",value:function toggle2(){this.setState({success:!this.state.success});}},{key:\"redirect\",value:function redirect(){window.location=window.location.origin+'/main/home';}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-7 border rounded py-3 my-3 mx-2 bg-light\"},React.createElement(\"h4\",{className:\"text-center\"},\"Post a Job\"),React.createElement(Form,{id:\"post-job-form\"},React.createElement(FormGroup,null,React.createElement(Label,null,\"Title\"),React.createElement(Input,{type:\"text\",id:\"title-input\",placeholder:\"title\",name:\"title\",value:this.state.title,onChange:this.handler.bind(this)}),React.createElement(FormFeedback,null,\"Plase add a title.\")),React.createElement(FormGroup,null,React.createElement(Label,null,\"Category\"),React.createElement(Input,{type:\"text\",id:\"category-input\",placeholder:\"category\",name:\"category\",value:this.state.category,onChange:this.handler.bind(this)}),React.createElement(FormFeedback,null,\"Plase add a Category.\")),React.createElement(FormGroup,null,React.createElement(Label,null,\"Address\"),React.createElement(Input,{type:\"text\",id:\"address-input\",placeholder:\"address\",name:\"address\",value:this.state.address,readonly:\"readonly\"}),React.createElement(\"a\",{href:\"#results\",onClick:this.viewAddress},\"Add or Edit Address\"),React.createElement(FormFeedback,null,\"Plase add an address.\")),React.createElement(FormGroup,null,React.createElement(Label,null,\"Description\"),React.createElement(Input,{type:\"textarea\",id:\"description-input\",placeholder:\"description\",rows:\"5\",name:\"description\",value:this.state.description,onChange:this.handler.bind(this),required:true}),React.createElement(FormFeedback,null,\"Plase add a Description.\")),React.createElement(\"button\",{className:\"btn btn-primary\",onClick:this.submit.bind(this),type:\"submit\"},\"Submit\"))),React.createElement(\"div\",{className:\"col-md-4  py-3 my-3 mx-2 \"},this.state.addressFlag?React.createElement(Address,{address1:this.state.address1,address2:this.state.address2,city:this.state.city,state:this.state.state,zip:this.state.zip,onChange:this.handler,onClick:this.editAddress}):null)),React.createElement(Spinner,{isOpen:this.state.spinner}),React.createElement(Modal,{isOpen:this.state.success,zIndex:\"10000\",className:\"pr-0\",centered:true,onEnter:this.addStyling},React.createElement(ModalHeader,null,\"Success!!\"),React.createElement(ModalBody,null,\"Job created!\"),React.createElement(ModalFooter,null,React.createElement(\"div\",{className:\"w-100\"},React.createElement(\"button\",{className:\"btn btn-block btn-primary\",onClick:this.toggle2.bind(this)},\"Create Another Job\"),React.createElement(\"button\",{className:\"btn btn-block btn-primary mt-3\",onClick:this.redirect.bind(this)},\"Home\")))));}}]);return PostJob;}(React.Component);export{PostJob as default};","map":{"version":3,"sources":["/Users/davidirizarry/Desktop/Macbook/Coding-BootCamp/Coding-BootCamp/izzy-resume-finder-react/client/src/components/pages/Main/pages/PostJob/PostJob.js"],"names":["React","Form","FormGroup","Label","Input","Modal","ModalBody","FormFeedback","ModalHeader","ModalFooter","Spinner","Address","axios","PostJob","state","title","category","description","address","address1","address2","city","zip","addressFlag","spinner","success","componentDidMount","props","mainState","setState","handler","event","target","name","value","editAddress","preventDefault","viewAddress","e","titleInput","document","getElementById","categoryInput","descriptionInput","addressInput","classList","add","remove","toggle1","post","owner","id","then","res","toggle2","resetForm","console","log","catch","err","error","window","location","origin","bind","submit","addStyling","redirect","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Form, FormGroup, Label, Input, Modal, ModalBody, FormFeedback, ModalHeader, ModalFooter } from 'reactstrap';\nimport Spinner from '../../../../Spinner/Spinner';\nimport './PostJob.css';\nimport Address from \"../Home/components/Address\";\nimport axios from 'axios';\n\nexport default class PostJob extends React.Component {\n  state = {\n    title: '',\n    category: '',\n    description: '',\n    address: '', //this is just a string in purpose of viewing it on the page \n    address1: '',\n    address2: '',\n    state: '',\n    city: '',\n    zip: '',\n    addressFlag: 0,\n    spinner: false,\n    success: false\n  }\n\n  componentDidMount = () => {\n    let address = '';\n    if ((!this.props.mainState.address1) || (!this.props.mainState.state) || (!this.props.mainState.city) || (!this.props.mainState.zip)) {\n      address = \"\";\n    }\n    else\n     {\n      if (this.props.mainState.address2) {\n        address = this.props.mainState.address1 + \" \" + this.props.mainState.address2 + \" \" + this.props.mainState.state + \" \" + this.props.mainState.city + \" \" + this.props.mainState.zip\n      }\n      else {\n        address = this.props.mainState.address1 + \" \" + this.props.mainState.state + \" \" + this.props.mainState.city + \" \" + this.props.mainState.zip\n      }\n      this.setState({ address: address, address1: this.props.mainState.address1, address2: this.props.mainState.address2, state: this.props.mainState.state, city: this.props.mainState.city, zip: this.props.mainState.zip })\n    }\n   \n  }\n\n  handler = (event) => {\n    const { name, value } = event.target;\n    this.setState({\n      [name]: value\n    })\n  };\n\n  resetForm() {\n    this.setState({\n      title: '',\n      category: '',\n      description: ''\n    })\n  }\n\n  editAddress = (event) => {\n    event.preventDefault();\n    this.setState({ addressFlag: 0 })\n    let address = '';\n    if (this.state.address2) {\n      address = this.state.address1 + \" \" + this.state.address2 + \" \" + this.state.state + \" \" + this.state.city + \" \" + this.state.zip\n    }\n    else {\n      address = this.state.address1 + \" \" + this.state.state + \" \" + this.state.city + \" \" + this.state.zip\n    }\n    this.setState({ address: address, address1: this.state.address1, address2: this.state.address2, state: this.state.state, city: this.state.city, zip: this.state.zip })\n  }\n\n\n  viewAddress = (e) => {\n    e.preventDefault();\n    this.setState({ addressFlag: 1 })\n  }\n\n\n  submit(event) {\n    event.preventDefault();\n    const title = this.state.title;\n    const category = this.state.category;\n    const description = this.state.description;\n    const address = this.state.address;\n    const titleInput = document.getElementById('title-input');\n    const categoryInput = document.getElementById('category-input');\n    const descriptionInput = document.getElementById('description-input');\n    const addressInput = document.getElementById('address-input');\n\n    //form validation\n    if (!title || !category || !description || !address) {\n      if (!title) titleInput.classList.add('is-invalid');\n      else {\n        titleInput.classList.remove('is-invalid');\n        titleInput.classList.add('is-valid');\n      }\n      if (!category) categoryInput.classList.add('is-invalid');\n      else {\n        categoryInput.classList.remove('is-invalid');\n        categoryInput.classList.add('is-valid');\n      }\n      if (!description) descriptionInput.classList.add('is-invalid');\n      else {\n        descriptionInput.classList.remove('is-invalid');\n        descriptionInput.classList.add('is-valid');\n      }\n      if (!address) addressInput.classList.add('is-invalid');\n      else {\n        addressInput.classList.remove('is-invalid');\n        addressInput.classList.add('is-valid');\n      }\n    } else {\n\n      //request\n      this.toggle1();\n      axios.post('/api/jobs', {\n        owner: this.props.mainState.id,\n        title: this.state.title,\n        description: this.state.description,\n        category: this.state.category,\n        address: {\n          address1: this.state.address1,\n          address2: this.state.address2,\n          city: this.state.city,\n          state: this.state.state,\n          zip: this.state.zip\n        } //now you can take address1,address2,state,city,zip from his.state\n      })\n        .then(res => {\n          this.toggle1();\n          this.toggle2();\n          this.resetForm();\n          console.log(res);\n        })\n        .catch(err => {\n          console.error(err);\n          this.toggle1();\n        })\n    }\n  }\n\n  toggle1() {\n    this.setState({\n      spinner: !this.state.spinner\n    });\n  }\n\n  toggle2() {\n    this.setState({\n      success: !this.state.success\n    });\n  }\n\n  redirect() {\n    window.location = window.location.origin + '/main/home'\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-md-7 border rounded py-3 my-3 mx-2 bg-light\">\n            <h4 className=\"text-center\">Post a Job</h4>\n            <Form id=\"post-job-form\">\n              <FormGroup>\n                <Label>Title</Label>\n                <Input type=\"text\" id=\"title-input\" placeholder=\"title\" name=\"title\" value={this.state.title} onChange={this.handler.bind(this)} />\n                <FormFeedback>Plase add a title.</FormFeedback>\n              </FormGroup>\n              <FormGroup>\n                <Label>Category</Label>\n                <Input type=\"text\" id=\"category-input\" placeholder=\"category\" name=\"category\" value={this.state.category} onChange={this.handler.bind(this)} />\n                <FormFeedback>Plase add a Category.</FormFeedback>\n              </FormGroup>\n              <FormGroup>\n                <Label>Address</Label>\n                <Input type=\"text\" id=\"address-input\" placeholder=\"address\" name=\"address\" value={this.state.address} readonly=\"readonly\" />\n                <a href=\"#results\" onClick={this.viewAddress}>Add or Edit Address</a>\n                <FormFeedback>Plase add an address.</FormFeedback>\n              </FormGroup>\n              <FormGroup>\n                <Label>Description</Label>\n                <Input type=\"textarea\" id=\"description-input\" placeholder=\"description\" rows=\"5\" name=\"description\" value={this.state.description} onChange={this.handler.bind(this)} required />\n                <FormFeedback>Plase add a Description.</FormFeedback>\n              </FormGroup>\n              <button className=\"btn btn-primary\" onClick={this.submit.bind(this)} type=\"submit\">Submit</button>\n            </Form>\n          </div>\n          <div className=\"col-md-4  py-3 my-3 mx-2 \">\n            {this.state.addressFlag ?\n              <Address\n                address1={this.state.address1}\n                address2={this.state.address2}\n                city={this.state.city}\n                state={this.state.state}\n                zip={this.state.zip}\n                onChange={this.handler}\n                onClick={this.editAddress}\n              /> : null}\n          </div>\n        </div>\n\n        <Spinner isOpen={this.state.spinner} />\n        <Modal isOpen={this.state.success} zIndex=\"10000\" className=\"pr-0\" centered onEnter={this.addStyling}>\n          <ModalHeader>\n            Success!!\n          </ModalHeader>\n          <ModalBody>\n            Job created!\n          </ModalBody>\n          <ModalFooter>\n            <div className=\"w-100\">\n              <button className=\"btn btn-block btn-primary\" onClick={this.toggle2.bind(this)}>Create Another Job</button>\n              <button className=\"btn btn-block btn-primary mt-3\" onClick={this.redirect.bind(this)}>Home</button>\n            </div>\n          </ModalFooter>\n        </Modal>\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}