{"ast":null,"code":"import _defineProperty from\"/Users/davidirizarry/Desktop/Macbook/Coding-BootCamp/Coding-BootCamp/25-Project-3/resume_finder/izzy-resume-finder-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/davidirizarry/Desktop/Macbook/Coding-BootCamp/Coding-BootCamp/25-Project-3/resume_finder/izzy-resume-finder-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/davidirizarry/Desktop/Macbook/Coding-BootCamp/Coding-BootCamp/25-Project-3/resume_finder/izzy-resume-finder-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/davidirizarry/Desktop/Macbook/Coding-BootCamp/Coding-BootCamp/25-Project-3/resume_finder/izzy-resume-finder-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/davidirizarry/Desktop/Macbook/Coding-BootCamp/Coding-BootCamp/25-Project-3/resume_finder/izzy-resume-finder-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/davidirizarry/Desktop/Macbook/Coding-BootCamp/Coding-BootCamp/25-Project-3/resume_finder/izzy-resume-finder-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import withAuth from'../../withAuth';import AuthService from'../../AuthService';import API from\"../../../utils/API\";import{Route}from'react-router-dom';import PostJob from'./pages/PostJob/PostJob';import SearchJobs from'./pages/SearchJobs/SearchJobs';import Home from'./pages/Home/Home';import axios from'axios';var Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);function Main(){var _this;_classCallCheck(this,Main);_this=_possibleConstructorReturn(this,_getPrototypeOf(Main).call(this));_this.state={id:\"\",skill:\"\",skills:[],email:\"\",phone:\"\",name:\"\",image:null,address1:\"\",address2:\"\",city:\"\",state:\"\",zip:\"\",myJobs:[],myBids:[],history:[],addressFlag:0};_this.handleInputChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.getUserInfo=function(email){API.getUserInfoFromDB(email).then(function(res){var data=res.data;var address=data.address;if(data.image){var b64string=data.image;var buf=Buffer.from(b64string,'base64');}_this.setState({skills:data.skills,id:data._id,myJobs:data.myJobs,myBids:data.myBids,address1:address?address.address1:null,address2:address?address.address2:null,state:address?address.state:null,city:address?address.city:null,zip:address?address.zip:null,image:buf?buf:null});}).then(function(){_this.getBidData();}).catch(function(err){return console.log(err);});};_this.componentDidMount=function(){//call the function to retrive user info \n_this.getUserInfo(_this.Auth.getProfile().email);//get user email and name from the token through getProfile function\n_this.setState({name:_this.Auth.getProfile().name,email:_this.Auth.getProfile().email});};_this.viewAddress=function(e){e.preventDefault();_this.setState({addressFlag:1});};_this.addSkill=function(){var tempSkillArray=_this.state.skills;tempSkillArray.push(_this.state.skill);API.updateSkills(tempSkillArray,_this.state.id).then(function(res){return _this.getUserInfo(_this.Auth.getProfile().email);})//this.setState({skills:res.data.skills}))//here we retrive the data and set state each with its value \n.catch(function(err){return console.log(err);});_this.setState({skill:\"\"});};_this.saveImage=function(files){var reader=new FileReader();reader.onload=function(){var dataURL=reader.result;_this.setState({image:dataURL});API.saveImage(dataURL,_this.Auth.getProfile().email).then(function(res){return console.log(res);}).catch(function(err){return console.log(err);});};reader.readAsDataURL(files[0]);};_this.editAddress=function(event){event.preventDefault();var data={address1:_this.state.address1,address2:_this.state.address2,state:_this.state.state,city:_this.state.city,zip:_this.state.zip,id:_this.state.id};_this.setState({addressFlag:0});API.updateAddress(data).then(function(res){return _this.getUserInfo(_this.Auth.getProfile().email);}).catch(function(err){return console.log(err);});};_this.Auth=new AuthService();return _this;}_createClass(Main,[{key:\"getBidData\",value:function getBidData(){var _this2=this;var jobIds=this.state.myBids;axios.get('/api/bids',{params:{jobIds:jobIds}}).then(function(res){var bids=[];res.data.forEach(function(job){job.bids.forEach(function(bid){if(bid.user===_this2.state.id){var bidInfo={status:bid.status,price:bid.price,address:job.address,title:job.title,category:job.category,description:job.description,ownerId:job.owner};bids.push(bidInfo);}});});_this2.setState({myBids:bids});}).catch(function(err){return console.log(err);});}},{key:\"getUserDataById\",value:function getUserDataById(event){event.preventDefault();console.log('hello');var id=this.state.id;axios.get(\"/api/userData/\".concat(id)).then(function(res){console.log(res);}).catch(function(err){console.error(err);});}},{key:\"getUserDataPopulate\",value:function getUserDataPopulate(event){event.preventDefault();var id=this.state.id;var field='myJobs';axios.get(\"/api/userData/populate/\".concat(id,\"/\").concat(field)).then(function(res){console.log(res);}).catch(function(err){console.error(err);});}},{key:\"confirmBid\",value:function confirmBid(jobId,userId){var _this3=this;axios.put('/api/bid/confirm',{jobId:jobId,userId:userId}).then(function(){_this3.getUserInfo(_this3.Auth.getProfile().email);_this3.setState({name:_this3.Auth.getProfile().name,email:_this3.Auth.getProfile().email});});}},{key:\"render\",value:function render(){var _this4=this;return React.createElement(\"div\",{className:\"d-flex flex-column flex-grow-1\"},React.createElement(Route,{exact:true,path:\"/main/home\",render:function render(props){return React.createElement(Home,Object.assign({},props,{mainState:_this4.state,onChange:_this4.handleInputChange,onClick:_this4.addSkill,onAddressClick:_this4.editAddress,onView:_this4.viewAddress,onDrop:_this4.saveImage,confirmBid:_this4.confirmBid.bind(_this4)}));}}),React.createElement(Route,{exact:true,path:\"/main/search-jobs\",render:function render(props){return React.createElement(SearchJobs,Object.assign({},props,{mainState:_this4.state}));}}),React.createElement(Route,{exact:true,path:\"/main/post-job\",render:function render(props){return React.createElement(PostJob,Object.assign({},props,{mainState:_this4.state}));}}));}}]);return Main;}(Component);export default withAuth(Main);","map":{"version":3,"sources":["/Users/davidirizarry/Desktop/Macbook/Coding-BootCamp/Coding-BootCamp/25-Project-3/resume_finder/izzy-resume-finder-react/client/src/components/pages/Main/Main.js"],"names":["React","Component","withAuth","AuthService","API","Route","PostJob","SearchJobs","Home","axios","Main","state","id","skill","skills","email","phone","name","image","address1","address2","city","zip","myJobs","myBids","history","addressFlag","handleInputChange","event","target","value","setState","getUserInfo","getUserInfoFromDB","then","res","data","address","b64string","buf","Buffer","from","_id","getBidData","catch","err","console","log","componentDidMount","Auth","getProfile","viewAddress","e","preventDefault","addSkill","tempSkillArray","push","updateSkills","saveImage","files","reader","FileReader","onload","dataURL","result","readAsDataURL","editAddress","updateAddress","jobIds","get","params","bids","forEach","job","bid","user","bidInfo","status","price","title","category","description","ownerId","owner","error","field","jobId","userId","put","props","confirmBid","bind"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport withAuth from '../../withAuth';\nimport AuthService from '../../AuthService';\nimport API from \"../../../utils/API\";\nimport { Route } from 'react-router-dom';\nimport PostJob from './pages/PostJob/PostJob';\nimport SearchJobs from './pages/SearchJobs/SearchJobs';\nimport Home from './pages/Home/Home';\nimport axios from 'axios';\n\nclass Main extends Component {\n  constructor() {\n    super();\n    this.Auth = new AuthService();\n  }\n\n  state = {\n    id: \"\",\n    skill: \"\",\n    skills: [],\n    email: \"\",\n    phone: \"\",\n    name: \"\",\n    image: null,\n    address1: \"\",\n    address2: \"\",\n    city: \"\",\n    state: \"\",\n    zip: \"\",\n    myJobs: [],\n    myBids: [],\n    history: [],\n    addressFlag: 0\n  }\n\n  handleInputChange = event => {\n    const { name, value } = event.target;\n    this.setState({\n      [name]: value\n    });\n  };\n\n  getBidData() {\n    const jobIds = this.state.myBids;\n    axios.get('/api/bids', { params: { jobIds: jobIds } })\n      .then(res => {\n        const bids = []\n        res.data.forEach(job => {\n          job.bids.forEach(bid => {\n            if (bid.user === this.state.id) {\n              const bidInfo = {\n                status: bid.status,\n                price: bid.price,\n                address: job.address,\n                title: job.title,\n                category: job.category,\n                description: job.description,\n                ownerId: job.owner\n              }\n              bids.push(bidInfo);\n            }\n          })\n        })\n        this.setState({\n          myBids: bids\n        })\n      })\n      .catch(err => console.log(err));\n  }\n\n  getUserInfo = (email) => {\n    API.getUserInfoFromDB(email)\n      .then(res => {\n        const data = res.data;\n        const address = data.address;\n        if (data.image) {\n          var b64string = data.image;\n          var buf = Buffer.from(b64string, 'base64');\n        }\n        this.setState({\n          skills: data.skills,\n          id: data._id,\n          myJobs: data.myJobs,\n          myBids: data.myBids,\n          address1: address ? address.address1 : null,\n          address2: address ? address.address2 : null,\n          state: address ? address.state : null,\n          city: address ? address.city : null,\n          zip: address ? address.zip : null,\n          image: buf ? buf : null\n        })\n      })\n      .then(() => {\n        this.getBidData()\n      })\n      .catch(err => console.log(err));\n  }\n\n  componentDidMount = () => {\n    //call the function to retrive user info \n    this.getUserInfo(this.Auth.getProfile().email);\n    //get user email and name from the token through getProfile function\n    this.setState({\n      name: this.Auth.getProfile().name,\n      email: this.Auth.getProfile().email\n    });\n  }\n\n  viewAddress = (e) => {\n    e.preventDefault();\n    this.setState({ addressFlag: 1 })\n  }\n\n  addSkill = () => {\n    let tempSkillArray = this.state.skills;\n    tempSkillArray.push(this.state.skill);\n    API.updateSkills(tempSkillArray, this.state.id)\n      .then(res => this.getUserInfo(this.Auth.getProfile().email)) //this.setState({skills:res.data.skills}))//here we retrive the data and set state each with its value \n      .catch(err => console.log(err));\n    this.setState({ skill: \"\" })\n  }\n\n  saveImage = (files) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n      const dataURL = reader.result;\n      this.setState({ image: dataURL })\n      API.saveImage(dataURL, this.Auth.getProfile().email)\n        .then(res => console.log(res))\n        .catch(err => console.log(err));\n    };\n    reader.readAsDataURL(files[0]);\n  }\n\n  editAddress = (event) => {\n    event.preventDefault();\n    let data = {\n      address1: this.state.address1,\n      address2: this.state.address2,\n      state: this.state.state,\n      city: this.state.city,\n      zip: this.state.zip,\n      id: this.state.id\n    }\n    this.setState({ addressFlag: 0 })\n    API.updateAddress(data)\n      .then(res => this.getUserInfo(this.Auth.getProfile().email))\n      .catch(err => console.log(err));\n  }\n\n  getUserDataById(event) {\n    event.preventDefault();\n    console.log('hello');\n    const id = this.state.id;\n    axios.get(`/api/userData/${id}`)\n      .then(res => {\n        console.log(res);\n      })\n      .catch(err => {\n        console.error(err);\n      })\n  }\n\n  getUserDataPopulate(event) {\n    event.preventDefault();\n    const id = this.state.id;\n    const field = 'myJobs';\n    axios.get(`/api/userData/populate/${id}/${field}`)\n      .then(res => {\n        console.log(res);\n      })\n      .catch(err => {\n        console.error(err);\n      })\n  }\n\n  confirmBid(jobId, userId) {\n    axios.put('/api/bid/confirm', {\n      jobId: jobId,\n      userId: userId\n    })\n      .then(() => {\n        this.getUserInfo(this.Auth.getProfile().email);\n        this.setState({\n          name: this.Auth.getProfile().name,\n          email: this.Auth.getProfile().email\n        });\n      });\n  }\n\n  render() {\n    return (\n      <div className=\"d-flex flex-column flex-grow-1\">\n        <Route exact path=\"/main/home\" render={(props) => <Home {...props} mainState={this.state} onChange={this.handleInputChange} onClick={this.addSkill} onAddressClick={this.editAddress} onView={this.viewAddress} onDrop={this.saveImage} confirmBid={this.confirmBid.bind(this)} />} />\n        <Route exact path=\"/main/search-jobs\" render={(props) => <SearchJobs {...props} mainState={this.state} />} />\n        <Route exact path=\"/main/post-job\" render={(props) => <PostJob {...props} mainState={this.state} />} />\n      </div>\n    );\n  }\n}\n\nexport default withAuth(Main);\n\n"]},"metadata":{},"sourceType":"module"}